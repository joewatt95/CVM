\section{Introduction to the CVM algorithm}
\begin{frame}
\frametitle{What is the CVM algorithm?}
\begin{itemize}
\item Name after initals of S. Chakraborty, N. V. Vinodchandran, K. S. Meel
\pause
\item Streaming Algorithm (one sequential pass): $a_1, \ldots, a_l$
\pause
\item Algorithm has only limited mutable state: $\bigo( \varepsilon^{-2} \ln(\delta^{-1} l ) b )$
\pause
\item Approximation of the count of distinct elements
\pause
\item Randomized
\pause
\item Small error with high probability
\[
  \prob\left(|X - |A|| \geq \varepsilon |A| \right) \leq \delta 
\]
for choosable $\varepsilon > 0$, $\delta > 0$
\pause
\item Suprisingly simple compared to previous algorithms for the same problem \pause (see e.g. article in Quanta Magazine\cite{quanta})
\pause
\item No hashing
\end{itemize}
\end{frame}
\begin{frame}
\frametitle{Illustration of Streaming Algorithms}
\begin{figure}
\begin{center}
\begin{tikzpicture}[
  streamcell/.style={rectangle, draw=black, fill=black!15, thick, text centered,inner sep=3pt,minimum width=0.6cm},
]
\node[streamcell] (cell1) at (-3,2) {$a_1$};
\node[streamcell] (cell1) at (-2.4,2) {$a_1$};
\node[streamcell] (cell1) at (-1.8,2) {$a_2$};
\node at (0,2) {$\cdots$};
\node[streamcell] (cell1) at (2,2) {$a_{l}$};
\node (robot) at (0,0) {\robot{.25\textwidth}};
\end{tikzpicture}
\end{center}
\end{figure}
\end{frame}

\begin{frame}[label=cvm_algorithm]
\frametitle{The CVM Algorithm}
\begin{algorithmic}
  \Require Stream elements $a_1,\dots,a_l$, $0 < \varepsilon$, $0 < \delta < 1$.
  \Ensure A cardinality estimate $R$ for set $A = \{ a_1,\dots,a_l \}$ % such that $\prob \left( |R - |A| | > \varepsilon |A| \right) \leq \delta$
  \State $\chi \gets \{\}, p \gets 1, n = \ceil*{\frac{12}{\varepsilon^2} \ln{(\frac{6l}{\delta})} }$
  \For{$i \gets 1$ to $l$}
    \State $b \getsr \Ber(p)$ \Comment random bit $b$ from the Bernoulli distribution
    \If{$b$} \Comment insert $a_i$ if $b$ is true (with prob. $p$)
      \State $\chi \gets \chi \cup \{a_i\}$
    \Else \Comment remove $a_i$ otherwise
      \State $\chi \gets \chi - \{a_i\}$
    \EndIf
    \If{$|\chi| = n$} \Comment subsample if buffer $\chi$ is full
      \State $\chi \getsr \mathrm{subsample}(\chi)$
      \State $p \gets \frac{p}{2}$
    \EndIf
    \If{$|\chi| = n$}
      \Return $\bot$ \Comment fail if $\chi$ remains full
    \EndIf
  \EndFor
  \State \Return $\frac{|\chi|}{p}$ \Comment estimate cardinality of $A$
\end{algorithmic}
\end{frame}

\input{sections/algorithm_animation}

\againframe{cvm_algorithm}

\begin{frame}
\frametitle{Comparison with Previous Algorithms}
\alt<2>{\definecolor{colorrowa}{rgb}{0,0.8,0.6}}{\definecolor{colorrowa}{rgb}{1,1,1}}
\alt<3>{\definecolor{colorrowb}{rgb}{0,0.8,0.6}}{\definecolor{colorrowb}{rgb}{1,1,1}}
\alt<4>{\definecolor{colorrowc}{rgb}{0,0.8,0.6}}{\definecolor{colorrowc}{rgb}{1,1,1}}
\alt<5>{\definecolor{colorrowd}{rgb}{0,0.8,0.6}}{\definecolor{colorrowd}{rgb}{1,1,1}}
\alt<6>{\definecolor{colorrowe}{rgb}{0,0.8,0.6}}{\definecolor{colorrowe}{rgb}{1,1,1}}
\alt<7>{\definecolor{colorrowf}{rgb}{0,0.8,0.6}}{\definecolor{colorrowf}{rgb}{1,1,1}}
\begin{table}
\begin{tabular}{l | l | l | l}
\hline
Year & Author(s) & Space & Remarks \\
\hline
\rowcolor{colorrowa} 2001 & Bar-Yossef et al.~\cite{baryossef2002} & $\tilde{O}( \ln(\delta^{-1}) (\varepsilon^{-2}  + b ))$ &  M. H. \\
\rowcolor{colorrowb} 2007 & HLL~\cite{flajolet2007} &  $O(\ln(\delta^{-1} \varepsilon^{-2} \ln b)$ & O. M. H. \\
\rowcolor{colorrowc} 2010 & Kane et al.~\cite{kane2010} & $O( \ln(\delta^-1) (\varepsilon^{-2} + b) )$ & H. \\
\rowcolor{colorrowd} 2020 & B\l{}asiok~\cite{blasiok2020} & $O( \varepsilon^{-2} \ln (\delta^{-1}) + b )$ & H. E. \\
\rowcolor{colorrowe} 2022 & Karayel~\cite{karayel2022} & $O( \varepsilon^{-2} \ln (\delta^{-1}) + b )$ & H. E. M. \\
\rowcolor{colorrowf} 2023 & Chakraborty et al.~\cite{chakraborty2023} & $O( \varepsilon^{-2} \ln( \delta^{-1} l) b )$ & - \\
\end{tabular}
\end{table}
Abbreviations: 
\begin{itemize}
\item M: Supports merging of sketches.
\item H: Relies on hash functions.
\item E: Relies on expander graphs.
\item O: Random oracle model.
\end{itemize}
\end{frame}

\section{Summary of Results}
\begin{frame}
\frametitle{Summary of Results}
\begin{itemize}
\item <2-> Verification of Correctness \only<6->{using the original and new method}
\item <3-> Discovery of a new more succinct proof\only<6->{ (1003 lines vs.\ 2634 lines)}\only<4->{, which is based on a \emph{new} proof technique for randomized algorithms.}
\item <5-> We call it: \emph{Functional Probabilistic Invariants}
\item <7-> Discovery of an unbiased total variant of the algorithm. (Application of our new technique.)
\end{itemize}
\end{frame}

